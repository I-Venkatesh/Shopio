{"ast":null,"code":"import _objectSpread from\"/home/venkatesh/projectBackup/shopio/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import CheckoutSteps from\"../components/CheckoutSteps\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{createOrder}from\"../actions/orderActions\";import{ORDER_CREATE_RESET}from\"../constants/orderConstants\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});if(!cart.paymentMethod){props.history.push(\"/payment\");}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};cart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.15*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(function(){if(success){props.history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[success,order,props.history,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"22px\",color:\"#000033\"},children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),cart.shippingAddress.fullName,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),cart.shippingAddress.address,\",\",cart.shippingAddress.city,\",\",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"22px\",color:\"#000033\"},children:\"Payment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),cart.paymentMethod]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"22px\",color:\"#000033\"},children:\"Order Items\"}),/*#__PURE__*/_jsx(\"ul\",{children:cart.cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[item.qty,\" x \\u20B9\",item.price,\" = \\u20B9\",item.qty*item.price]})]})},item.product);})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"25px\",color:\"#000033\"},children:\"Order Summary\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",cart.itemsPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",cart.shippingPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",cart.taxPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Order Total\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",cart.totalPrice.toFixed(2)]})})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary block\",disabled:cart.cartItems.length===0,onClick:placeOrderHandler,children:\"Place Order\"})})]}),loading&&/*#__PURE__*/_jsx(LoadingBox,{}),error&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error})]})})]})]});}export default PlaceOrderScreen;","map":{"version":3,"sources":["/home/venkatesh/projectBackup/shopio/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","CheckoutSteps","useDispatch","useSelector","Link","createOrder","ORDER_CREATE_RESET","LoadingBox","MessageBox","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","itemPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","fontSize","color","shippingAddress","fullName","address","city","postalCode","country","map","item","image","name","product","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../actions/orderActions\";\nimport { ORDER_CREATE_RESET } from \"../constants/orderConstants\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nfunction PlaceOrderScreen(props) {\n  const cart = useSelector((state) => state.cart);\n  if (!cart.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n  const orderCreate = useSelector((state) => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n\n  const toPrice = (num) => Number(num.toFixed(2));\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n  cart.shippingPrice = cart.itemPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n  };\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({ type: ORDER_CREATE_RESET });\n    }\n  }, [success, order, props.history, dispatch]);\n  return (\n    <div>\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"row top\">\n        <div className=\"col-2\">\n          <ul>\n            <li>\n              <div className=\"card card-body\">\n                <h2 style={{fontSize:\"22px\", color: \"#000033\"}}>Shipping</h2>\n                <p>\n                  <strong>Name:</strong>\n                  {cart.shippingAddress.fullName}\n                  <br />\n                  <strong>Address:</strong>\n                  {cart.shippingAddress.address},{cart.shippingAddress.city},\n                  {cart.shippingAddress.postalCode},\n                  {cart.shippingAddress.country}\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2 style={{fontSize:\"22px\", color: \"#000033\"}}>Payment</h2>\n                <p>\n                  <strong>Method:</strong>\n                  {cart.paymentMethod}\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2 style={{fontSize:\"22px\", color: \"#000033\"}}>Order Items</h2>\n                <ul>\n                  {cart.cartItems.map((item) => (\n                    <li key={item.product}>\n                      <div className=\"row\">\n                        <div>\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"small\"\n                          ></img>\n                        </div>\n                        <div className=\"min-30\">\n                          <Link to={`/product/${item.product}`}>\n                            {item.name}\n                          </Link>\n                        </div>\n                        <div>\n                          {item.qty} x ₹{item.price} = ₹{item.qty * item.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <div className=\"col-1\">\n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2 style={{fontSize:\"25px\", color: \"#000033\"}}>Order Summary</h2>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Items</div>\n                  <div>₹{cart.itemsPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Shipping</div>\n                  <div>₹{cart.shippingPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Tax</div>\n                  <div>₹{cart.taxPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>\n                    <strong>Order Total</strong>\n                  </div>\n                  <div>\n                    <strong>₹{cart.totalPrice.toFixed(2)}</strong>\n                  </div>\n                </div>\n              </li>\n              <li>\n                <button\n                  type=\"button\"\n                  className=\"primary block\"\n                  disabled={cart.cartItems.length === 0}\n                  onClick={placeOrderHandler}\n                >\n                  Place Order\n                </button>\n              </li>\n            </ul>\n            {loading && <LoadingBox></LoadingBox>}\n            {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PlaceOrderScreen;\n"]},"metadata":{},"sourceType":"module"}