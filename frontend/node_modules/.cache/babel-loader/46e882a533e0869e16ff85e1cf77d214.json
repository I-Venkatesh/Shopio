{"ast":null,"code":"import _regeneratorRuntime from\"/home/venkatesh/projectBackup/shopio/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/venkatesh/projectBackup/shopio/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"axios\";import{ORDER_CREATE_FAIL,ORDER_CREATE_REQUEST,ORDER_CREATE_SUCCESS,ORDER_DETAILS_REQUEST,ORDER_DETAILS_SUCCESS,ORDER_DETAILS_FAIL,ORDER_PAY_REQUEST,ORDER_PAY_FAIL,ORDER_PAY_SUCCESS}from\"../constants/orderConstants.js\";import{CART_EMPTY}from\"../constants/cartConstants\";export var createOrder=function createOrder(order){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,_yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:ORDER_CREATE_REQUEST,payload:order});_context.prev=1;_getState=getState(),userInfo=_getState.userSignin.userInfo;_context.next=5;return Axios.post(\"https://shopio.herokuapp.com/api/orders\",order,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;dispatch({type:ORDER_CREATE_SUCCESS,payload:data.order});dispatch({type:CART_EMPTY});localStorage.removeItem(\"cartItems\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch({type:ORDER_CREATE_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var detailsOrder=function detailsOrder(orderId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState2,userInfo,_yield$Axios$get,data,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:ORDER_DETAILS_REQUEST,payload:orderId});_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context2.prev=2;_context2.next=5;return Axios.get(\"https://shopio.herokuapp.com/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get=_context2.sent;data=_yield$Axios$get.data;dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);message=_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message;dispatch({type:ORDER_DETAILS_FAIL,payload:message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var payOrder=function payOrder(order,paymentResult){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState3,userInfo,_Axios$put,data,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:ORDER_PAY_REQUEST,payload:{order:order,paymentResult:paymentResult}});_getState3=getState(),userInfo=_getState3.userSignin.userInfo;try{_Axios$put=Axios.put(\"https://shopio.herokuapp.com/api/orders/\".concat(order._id,\"/pay\"),paymentResult,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}}),data=_Axios$put.data;dispatch({type:ORDER_PAY_SUCCESS,payload:data});}catch(error){message=error.response&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_PAY_FAIL,payload:message});}case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/venkatesh/projectBackup/shopio/frontend/src/actions/orderActions.js"],"names":["Axios","ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","ORDER_PAY_REQUEST","ORDER_PAY_FAIL","ORDER_PAY_SUCCESS","CART_EMPTY","createOrder","order","dispatch","getState","type","payload","userInfo","userSignin","post","headers","Authorization","token","data","localStorage","removeItem","response","message","detailsOrder","orderId","get","payOrder","paymentResult","put","_id","error"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport {\n  ORDER_CREATE_FAIL,\n  ORDER_CREATE_REQUEST,\n  ORDER_CREATE_SUCCESS,\n  ORDER_DETAILS_REQUEST,\n  ORDER_DETAILS_SUCCESS,\n  ORDER_DETAILS_FAIL,\n  ORDER_PAY_REQUEST,\n  ORDER_PAY_FAIL,\n  ORDER_PAY_SUCCESS,\n} from \"../constants/orderConstants.js\";\nimport { CART_EMPTY } from \"../constants/cartConstants\";\n\nexport const createOrder = (order) => async (dispatch, getState) => {\n  dispatch({ type: ORDER_CREATE_REQUEST, payload: order });\n  try {\n    const {\n      userSignin: { userInfo },\n    } = getState();\n    const { data } = await Axios.post(\n      \"https://shopio.herokuapp.com/api/orders\",\n      order,\n      {\n        headers: {\n          Authorization: `Bearer ${userInfo.token}`,\n        },\n      }\n    );\n    dispatch({ type: ORDER_CREATE_SUCCESS, payload: data.order });\n    dispatch({ type: CART_EMPTY });\n    localStorage.removeItem(\"cartItems\");\n  } catch (error) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const detailsOrder = (orderId) => async (dispatch, getState) => {\n  dispatch({ type: ORDER_DETAILS_REQUEST, payload: orderId });\n  const {\n    userSignin: { userInfo },\n  } = getState();\n  try {\n    const { data } = await Axios.get(\n      `https://shopio.herokuapp.com/api/orders/${orderId}`,\n      {\n        headers: { Authorization: `Bearer ${userInfo.token}` },\n      }\n    );\n    dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message;\n    dispatch({ type: ORDER_DETAILS_FAIL, payload: message });\n  }\n};\n\nexport const payOrder =\n  (order, paymentResult) => async (dispatch, getState) => {\n    dispatch({ type: ORDER_PAY_REQUEST, payload: { order, paymentResult } });\n    const {\n      userSignin: { userInfo },\n    } = getState();\n    try {\n      const { data } = Axios.put(\n        `https://shopio.herokuapp.com/api/orders/${order._id}/pay`,\n        paymentResult,\n        {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        }\n      );\n      dispatch({ type: ORDER_PAY_SUCCESS, payload: data });\n    } catch (error) {\n      const message =\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message;\n      dispatch({ type: ORDER_PAY_FAIL, payload: message });\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}